I need to integrate Firebase Storage for file uploads. Here are the details:

Project Details:

- Tech stack: [e.g., React + Firebase, Next.js, React Native, etc.]
- File types: [images, videos, documents, audio, etc.]
- Upload scenarios: [user profiles, content creation, file sharing]
- Security requirements: [authentication, access control, public/private files]
- Volume: [concurrent uploads, storage size expectations]
- Features needed: [progress tracking, resumable uploads, metadata]
- Integration: [existing Firebase project, new setup]

What I need:

1. Firebase project setup and configuration
2. Authentication integration
3. File upload implementation with progress
4. Security rules configuration
5. File download and access control
6. Metadata handling and organization
7. Error handling and retry logic
8. Performance optimization
9. Offline capabilities (if needed)

Additional context: [existing Firebase setup, specific file handling requirements]

Please provide a complete working example with detailed comments.
