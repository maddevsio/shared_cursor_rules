Help me integrate PostHog into my [TECH_STACK] application for product analytics.

Project context:

- Tech stack: [XXX]
- Development environment: [YYY]
- Integration purpose: Self-hosted product analytics with feature flags

What I need:

1. PostHog instance setup (self-hosted or cloud)
2. [XXX] SDK integration
3. Event tracking implementation
4. User identification and properties
5. Feature flags integration
6. Funnel and cohort analysis setup

Additional requirements:

- Session recording configuration
- A/B testing capabilities
- Privacy-compliant tracking

Please provide a complete working example with detailed comments.
