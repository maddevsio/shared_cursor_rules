Help me integrate Google Analytics 4 (GA4) into my [TECH_STACK] application.

Project context:

- Tech stack: [XXX]
- Development environment: [YYY]
- Integration purpose: Track user behavior, page views, and custom events

What I need:

1. GA4 property setup and configuration
2. Google Tag Manager integration
3. Page view tracking implementation
4. Custom event tracking (button clicks, form submissions)
5. E-commerce tracking for purchases
6. GDPR compliance and cookie consent

Additional requirements:

- Server-side tracking for better data accuracy
- Custom dimensions and metrics
- Integration with Google Tag Manager

Please provide a complete working example with detailed comments.
